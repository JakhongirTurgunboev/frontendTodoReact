(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{38:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var r,a=n(1),c=n.n(a),s=n(11),o=n.n(s),i=(n(38),n(39),n(7)),u=n(2),l=n.n(u),d=n(4),b=n(3),j=n(5),p=n(10),f=n(33),m=n(6),O=Object(m.b)("todos/getTodosAsync",function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://backend-flask-fd7d.onrender.com/api?page=".concat(t));case 2:if(!(n=e.sent).ok){e.next=8;break}return e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",{todos:r});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h=Object(m.b)("todos/updateTodoAsync",function(){var e=Object(d.a)(l.a.mark((function e(t,n){var r,a,c,s,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,a=Object(f.a)(t,["id"]),c=n.getState(),s=c.login.accessToken,e.next=5,fetch("https://backend-flask-fd7d.onrender.com/api/".concat(r),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(a)});case 5:if(!(o=e.sent).ok){e.next=13;break}return e.next=9,o.json();case 9:return i=e.sent,e.abrupt("return",{id:r,todo:i});case 13:throw new Error("Todo update failed");case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),x=Object(m.b)("todos/addTodoAsync",function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://backend-flask-fd7d.onrender.com/api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t.username,email:t.email,task_text:t.task_text,status:!1})});case 2:if(!(n=e.sent).ok){e.next=8;break}return e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",{todo:r});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),v=Object(m.b)("todos/completeTodoAsync",function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://backend-flask-fd7d.onrender.com/api/".concat(t.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({completed:t.completed})});case 2:if(!(n=e.sent).ok){e.next=8;break}return e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",{todo:r});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),k=Object(m.b)("todos/deleteTodoAsync",function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://backend-flask-fd7d.onrender.com/api/".concat(t.id),{method:"DELETE"});case 2:if(!e.sent.ok){e.next=5;break}return e.abrupt("return",{id:t.id});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),g=Object(m.c)({name:"todos",initialState:{results:[]},reducers:{addTodo:function(e,t){var n={username:t.payload.username,email:t.payload.email,task_text:t.payload.task_text,status:!1};e.results.push(n)},toggleComplete:function(e,t){var n=e.findIndex((function(e){return e.id===t.payload.id}));e[n].status=t.payload.status},deleteTodo:function(e,t){return e.filter((function(e){return e.id!==t.payload.id}))}},extraReducers:(r={},Object(p.a)(r,O.fulfilled,(function(e,t){return t.payload.todos})),Object(p.a)(r,x.fulfilled,(function(e,t){e.results.push(t.payload.todo)})),Object(p.a)(r,v.fulfilled,(function(e,t){var n=e.findIndex((function(e){return e.id===t.payload.todo.id}));e[n].completed=t.payload.todo.completed})),Object(p.a)(r,h.fulfilled,(function(e,t){var n=e.results.findIndex((function(e){return e.id===t.payload.id}));e[n]=t.payload.todo})),Object(p.a)(r,k.fulfilled,(function(e,t){return e.filter((function(e){return e.id!==t.payload.id}))})),r)}),y=g.actions,w=(y.addTodo,y.toggleComplete,y.deleteTodo,g.reducer),T=n(31),C=n.n(T),N=Object(m.b)("login/loginAsync",function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://backend-flask-fd7d.onrender.com/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:if(!(n=e.sent).ok){e.next=10;break}return e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r.access_token);case 10:throw new Error("Login failed");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),S=Object(m.b)("login/logoutAsync",function(){var e=Object(d.a)(l.a.mark((function e(t,n){var r,a,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState(),a=r.login.accessToken){e.next=4;break}throw new Error("No access token found");case 4:return e.prev=4,e.next=7,fetch("https://backend-flask-fd7d.onrender.com/api/logout",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}});case 7:if((c=e.sent).ok){e.next=13;break}return e.next=11,c.json();case 11:throw s=e.sent,new Error(s.message||"Logout failed");case 13:return e.abrupt("return",!0);case 16:throw e.prev=16,e.t0=e.catch(4),new Error("Logout failed");case 19:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(t,n){return e.apply(this,arguments)}}()),_=Object(m.c)({name:"login",initialState:{accessToken:null,error:null},reducers:{},extraReducers:function(e){e.addCase(N.fulfilled,(function(e,t){e.accessToken=t.payload,e.error=null})).addCase(N.rejected,(function(e,t){e.accessToken=null,e.error=t.error.message})).addCase(S.fulfilled,(function(e){e.accessToken=null,e.error=null}))}}).reducer,A=function(e){return e.login.accessToken},L=function(e){return e.login.error},E=n(0),P=function(e){var t=e.isOpen,n=e.onRequestClose,r=Object(a.useState)(""),c=Object(b.a)(r,2),s=c[0],o=c[1],i=Object(a.useState)(""),u=Object(b.a)(i,2),l=u[0],d=u[1],p=Object(j.c)(L),f=Object(j.c)(A),m=Object(j.b)();return Object(E.jsxs)(C.a,{isOpen:t,onRequestClose:n,children:[Object(E.jsx)("h2",{children:"Login"}),f?Object(E.jsxs)("div",{children:[Object(E.jsx)("p",{children:"You are logged in."}),Object(E.jsx)("button",{onClick:function(){m(S())},children:"Logout"})]}):Object(E.jsxs)("form",{onSubmit:function(e){e.preventDefault(),m(N({username:s,password:l}))},children:[Object(E.jsxs)("label",{children:["Username:",Object(E.jsx)("input",{type:"text",value:s,onChange:function(e){return o(e.target.value)}})]}),Object(E.jsxs)("label",{children:["Password:",Object(E.jsx)("input",{type:"password",value:l,onChange:function(e){return d(e.target.value)}})]}),p&&Object(E.jsx)("p",{className:"error",children:p}),Object(E.jsx)("button",{type:"submit",children:"Login"})]})]})},U=function(){var e=Object(a.useState)({username:"",email:"",task_text:""}),t=Object(b.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),s=Object(b.a)(c,2),o=s[0],u=s[1],p=Object(a.useState)(!1),f=Object(b.a)(p,2),m=f[0],O=f[1],h=Object(j.c)(A),v=Object(j.b)(),k=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v(S());case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("Logout failed:",e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return Object(E.jsxs)("div",{children:[h?Object(E.jsxs)("div",{children:[Object(E.jsx)("p",{children:"You are logged in."}),Object(E.jsx)("button",{type:"button",className:"btn btn-primary mb-2",onClick:k,children:"Logout"})]}):Object(E.jsxs)("form",{onSubmit:function(e){var t;e.preventDefault(),n.username&&(t=n.email,/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))&&n.task_text?v(x(n)):u("Invalid email format")},className:"form-inline mt-3 mb-3",children:[Object(E.jsx)("input",{type:"text",className:"form-control mb-2 mr-sm-2",placeholder:"Username",value:n.username,onChange:function(e){return r(Object(i.a)(Object(i.a)({},n),{},{username:e.target.value}))}}),Object(E.jsx)("input",{type:"email",className:"form-control mb-2 mr-sm-2",placeholder:"Email",value:n.email,onChange:function(e){r(Object(i.a)(Object(i.a)({},n),{},{email:e.target.value})),u("")}}),o&&Object(E.jsx)("div",{className:"invalid-feedback",children:o}),Object(E.jsx)("input",{type:"text",className:"form-control mb-2 mr-sm-2",placeholder:"Task Text",value:n.task_text,onChange:function(e){return r(Object(i.a)(Object(i.a)({},n),{},{task_text:e.target.value}))}}),Object(E.jsx)("button",{type:"submit",className:"btn btn-primary mb-2",children:"Submit"}),Object(E.jsx)("button",{type:"button",className:"btn btn-primary mb-2 ml-4",onClick:function(){return O(!0)},children:"Login"})]}),Object(E.jsx)(P,{isOpen:m,onRequestClose:function(){return O(!1)},onLoginSuccess:function(){O(!1)}})]})},I=n(32),J=function(e){var t=e.id,n=e.username,r=e.task_text,c=e.email,s=e.status,o=e.isAuthenticated,i=e.onUpdate,u=e.edited,l=Object(a.useState)(r),d=Object(b.a)(l,2),j=d[0],p=d[1],f=Object(a.useState)(s),m=Object(b.a)(f,2),O=m[0],h=m[1];return Object(E.jsxs)("tr",{children:[Object(E.jsx)("td",{children:n}),Object(E.jsx)("td",{children:c}),Object(E.jsx)("td",{children:o?Object(E.jsx)(E.Fragment,{children:Object(E.jsx)("input",{type:"text",value:j,onChange:function(e){p(e.target.value)}})}):Object(E.jsxs)(E.Fragment,{children:[r,u&&Object(E.jsx)("small",{className:"text-muted ml-1",children:"edited by admin"})]})}),Object(E.jsx)("td",{children:o?Object(E.jsxs)("select",{value:O,onChange:function(e){h(e.target.value)},children:[Object(E.jsx)("option",{value:"false",children:"In Progress"}),Object(E.jsx)("option",{value:"true",children:"Completed"})]}):s?"Completed":"In progress"}),o&&Object(E.jsx)("td",{children:Object(E.jsx)("button",{className:"btn btn-primary",onClick:function(e){i(t,{task_text:j,status:O})},children:"Update"})})]})},R=n(23),B=(n(64),function(){var e=Object(j.b)(),t=Object(j.c)((function(e){return e.todos})),n=Object(j.c)(A),r=Object(a.useState)(1),c=Object(b.a)(r,2),s=c[0],o=c[1];Object(a.useEffect)((function(){e(O(s))}),[e,s]);var u=Object(a.useState)({username:"",task_text:"",email:""}),p=Object(b.a)(u,1)[0],f=Object(a.useState)({field:"username",order:"asc"}),m=Object(b.a)(f,2),x=m[0],v=m[1],k=t&&t.results&&t.results.filter((function(e){var t=!p.username||e.username.includes(p.username),n=!p.task_text||e.task_text.includes(p.task_text),r=!p.email||e.email.includes(p.email);return t&&n&&r})),g=k&&Object(I.a)(k).sort((function(e,t){var n,r,a=(null===(n=e[x.field])||void 0===n?void 0:n.toLowerCase())||"",c=(null===(r=t[x.field])||void 0===r?void 0:r.toLowerCase())||"";return a<c?"asc"===x.order?-1:1:a>c?"asc"===x.order?1:-1:0})),y=function(){var t=Object(d.a)(l.a.mark((function t(r,a){var c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=11;break}return t.prev=1,t.next=4,e(h(Object(i.a)({id:r},a)));case 4:c=t.sent,h.fulfilled.match(c)&&R.toast.success("Todo updated successfully",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error("Failed to update todo:",t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}();return Object(E.jsxs)("div",{className:"container",children:[Object(E.jsx)("div",{className:"row my-4",children:Object(E.jsx)("div",{className:"col-md-12",children:Object(E.jsxs)("div",{className:"sort-options",children:[Object(E.jsxs)("label",{className:"mr-2",children:["Sort by:",Object(E.jsxs)("select",{className:"form-control-sm ml-1",value:x.field,onChange:function(e){return v(Object(i.a)(Object(i.a)({},x),{},{field:e.target.value}))},children:[Object(E.jsx)("option",{value:"username",children:"Username"}),Object(E.jsx)("option",{value:"email",children:"Email"}),Object(E.jsx)("option",{value:"task_text",children:"Task Text"})]})]}),Object(E.jsxs)("label",{children:["Order:",Object(E.jsxs)("select",{className:"form-control-sm ml-1",value:x.order,onChange:function(e){return v(Object(i.a)(Object(i.a)({},x),{},{order:e.target.value}))},children:[Object(E.jsx)("option",{value:"asc",children:"Ascending"}),Object(E.jsx)("option",{value:"desc",children:"Descending"})]})]})]})})}),Object(E.jsx)("div",{className:"row",children:Object(E.jsx)("div",{className:"col-md-12",children:Object(E.jsxs)("table",{className:"table",children:[Object(E.jsx)("thead",{children:Object(E.jsxs)("tr",{children:[Object(E.jsx)("th",{children:"Username"}),Object(E.jsx)("th",{children:"Email"}),Object(E.jsx)("th",{children:"Task Text"}),Object(E.jsx)("th",{children:"Status"}),n&&Object(E.jsx)("th",{children:"Action"})]})}),Object(E.jsx)("tbody",{children:g&&g.map((function(e){return Object(E.jsx)(J,{id:e.id,username:e.username,task_text:e.task_text,email:e.email,status:e.status,edited:e.edited,isAuthenticated:!!n,onUpdate:y},e.id)}))})]})})}),Object(E.jsx)("div",{className:"row my-4",children:Object(E.jsx)("div",{className:"col-md-12",children:Object(E.jsxs)("div",{className:"pagination",children:[Object(E.jsx)("button",{className:"btn btn-primary mr-2",disabled:1===s,onClick:function(){s>1&&o(s-1)},children:"Previous"}),Object(E.jsx)("button",{className:"btn btn-primary",disabled:!t||s===t.total_pages,onClick:function(){o(s+1)},children:"Next"})]})})}),Object(E.jsx)(R.ToastContainer,{})]})}),D=function(){return Object(E.jsxs)("div",{className:"container bg-white p-4 mt-5",children:[Object(E.jsx)("h1",{children:"My Todo List"}),Object(E.jsx)(U,{}),Object(E.jsx)(B,{})]})},q=Object(m.a)({reducer:{login:_,todos:w}});o.a.render(Object(E.jsx)(c.a.StrictMode,{children:Object(E.jsx)(j.a,{store:q,children:Object(E.jsx)(D,{})})}),document.getElementById("root"))}},[[65,1,2]]]);
//# sourceMappingURL=main.785b1b23.chunk.js.map